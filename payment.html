<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional Payment Page</title>
  <style>
    /* CSS Variables for Theme */
    :root {
      --bg-gradient: linear-gradient(-45deg, #f093fb, #f5576c, #4facfe, #00f2fe);
      --container-bg: rgba(255,255,255,0.85);
      --text-color: #333;
      --input-bg: #fff;
      --input-border: #ccc;
      --button-bg: #4a76ff;
      --button-text: #fff;
      --overlay-bg: rgba(0,0,0,0.6);
      --tick-stroke: #4CAF50;
    }
    [data-theme="dark"] {
      --bg-gradient: linear-gradient(-45deg, #2c3e50, #34495e, #2c3e50, #34495e);
      --container-bg: rgba(44,62,80,0.85);
      --text-color: #ecf0f1;
      --input-bg: #34495e;
      --input-border: #566573;
      --button-bg: #2980b9;
      --button-text: #ecf0f1;
      --overlay-bg: rgba(0,0,0,0.7);
      --tick-stroke: #2ecc71;
    }
    /* Reset & Base Styles */
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      display:flex; justify-content:center; align-items:center;
      min-height:100vh;
      background: var(--bg-gradient);
      background-size:400% 400%; animation:gradientBG 15s ease infinite;
      position:relative; overflow:hidden;
      color: var(--text-color);
    }
    @keyframes gradientBG { 0%,100%{background-position:0%50%}50%{background-position:100%50%} }
    .payment-container {
      background: var(--container-bg); backdrop-filter:blur(10px);
      border-radius:16px; box-shadow:0 12px 32px rgba(0,0,0,0.1);
      width:380px; padding:24px; position:relative; z-index:1;
    }
    h2 { text-align:center; font-size:1.6rem; margin-bottom:20px; }
    .method-toggle{display:flex; margin-bottom:24px;}
    .method-toggle button{flex:1;padding:12px;border:none;background:#e0e0e0;color:#555;cursor:pointer;transition:background .3s;}
    .method-toggle button.active{background:var(--button-bg);color:var(--button-text);}    
    .card-preview{perspective:1000px;margin-bottom:24px;height:220px;}
    .card-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .6s ease;}
    .card-face{position:absolute;width:100%;height:100%;border-radius:16px;backface-visibility:hidden;box-shadow:0 6px 20px rgba(0,0,0,0.1);}
    .card-front{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;display:flex;flex-direction:column;justify-content:space-between;}
    .number{font-size:1.3rem;letter-spacing:3px;}
    .details{display:flex;justify-content:space-between;font-size:.9rem;}
    .card-back{background:linear-gradient(135deg,#764ba2,#667eea);transform:rotateY(180deg);padding:20px;}
    .mag-strip{background:#000;height:40px;margin-bottom:20px;border-radius:4px;}
    .signature{background:#fff;height:36px;margin-bottom:12px;border-radius:4px;}
    .cvv-box{display:flex;justify-content:flex-end;}.cvv-label{font-size:.8rem;color:#333;margin-right:10px;}.cvv-value{background:#f0f0f0;padding:6px 10px;border-radius:4px;font-weight:700;}
    .input-group{margin-bottom:18px;}
    .input-group label{display:block;margin-bottom:6px;color:var(--text-color);font-weight:500;}
    .input-group input{width:100%;padding:14px;border:1px solid var(--input-border);border-radius:8px;background:var(--input-bg);color:var(--text-color);}
    .input-group input:focus{border-color:var(--button-bg);outline:none;}
    .input-row{display:flex;gap:16px;}
    .input-row .input-group{flex:1;}
    #pay-button{width:100%;padding:14px;background:var(--button-bg);color:var(--button-text);border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:background .3s;}
    #pay-button:hover{background:darken(var(--button-bg),10%);}    
    #overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--overlay-bg);display:none;z-index:2;}
    .success-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);background:#fff;padding:32px;border-radius:12px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,0.2);z-index:3;animation:pop .4s forwards;}
    @keyframes pop{to{transform:translate(-50%,-50%) scale(1);}}
    .tick{stroke-dasharray:100;stroke-dashoffset:100;animation:dash .8s ease forwards;stroke:var(--tick-stroke);}
    @keyframes dash{to{stroke-dashoffset:0;}}
    /* Theme Buttons */
    .theme-buttons{position:absolute;top:16px;right:16px;display:flex;gap:8px;z-index:4;}
    .theme-buttons button{padding:6px 12px;border:none;border-radius:6px;cursor:pointer;background:var(--button-bg);color:var(--button-text);font-size:.9rem;}
  </style>
</head>
<body data-theme="light">
  <div class="floating-circle"></div>
  <div class="floating-circle"></div>
  <!-- Theme Toggler -->
  <div class="theme-buttons">
    <button id="light-btn">Light</button>
    <button id="dark-btn">Dark</button>
  </div>

  <div id="overlay"></div>
  <div class="payment-container">
    <h2>Payment Details</h2>
    <div class="method-toggle">
      <button id="card-btn" class="active">Card</button>
      <button id="upi-btn">UPI</button>
    </div>
    <div class="card-preview active" id="card-preview">
      <div class="card-inner" id="card-inner">
        <div class="card-face card-front">
          <div class="number" id="preview-card-number">XXXX XXXX XXXX XXXX</div>
          <div class="details"><span id="preview-name">Name</span><span id="preview-expiry">MM/YY</span></div>
        </div>
        <div class="card-face card-back">
          <div class="mag-strip"></div>
          <div class="signature"></div>
          <div class="cvv-box"><span class="cvv-label">CVV</span><span class="cvv-value" id="preview-cvv">***</span></div>
        </div>
      </div>
    </div>
    <form id="payment-form">
      <div class="input-group"><label for="card-number">Card Number</label><input id="card-number" type="text" maxlength="19"></div>
      <div class="input-row"><div class="input-group"><label for="expiry-date">Expiry</label><input id="expiry-date" type="text" maxlength="5"></div><div class="input-group"><label for="cvv">CVV</label><input id="cvv" type="text" maxlength="3"></div></div>
      <div class="input-group"><label for="name">Name on Card</label><input id="name" type="text"></div>
      <button type="submit" id="pay-button">Pay Now</button>
    </form>
  </div>
  <div id="success-popup" class="success-popup" style="display:none;">
    <svg width="80" height="80" viewBox="0 0 52 52">
      <circle cx="26" cy="26" r="25" fill="none" stroke-width="2" stroke="var(--tick-stroke)"/>
      <path class="tick" fill="none" stroke-width="5" d="M14 27 l7 7 l17 -17"/>
    </svg>
    <h2>Payment Successful!</h2>
  </div>
  <script>
    // Theme Engine
    const lightBtn = document.getElementById('light-btn'), darkBtn = document.getElementById('dark-btn');
    const html = document.documentElement;
    const saved = localStorage.getItem('theme') || 'light';
    html.setAttribute('data-theme', saved);
    lightBtn.addEventListener('click', () => { html.setAttribute('data-theme','light'); localStorage.setItem('theme','light'); });
    darkBtn.addEventListener('click', () => { html.setAttribute('data-theme','dark'); localStorage.setItem('theme','dark'); });
    
    // rest of JS: toggle, tilt, flip, preview, submit...
    const cardBtn=document.getElementById('card-btn'), upiBtn=document.getElementById('upi-btn');
    const cardPreview=document.getElementById('card-preview'), cardInner=document.getElementById('card-inner');
    const form=document.getElementById('payment-form'), overlay=document.getElementById('overlay'), successPopup=document.getElementById('success-popup');
    const preview={num:document.getElementById('preview-card-number'),exp:document.getElementById('preview-expiry'),nm:document.getElementById('preview-name'),cvv:document.getElementById('preview-cvv')};
    cardBtn.addEventListener('click',()=>{cardBtn.classList.add('active');upiBtn.classList.remove('active');cardPreview.classList.add('active');});
    upiBtn.addEventListener('click',()=>{upiBtn.classList.add('active');cardBtn.classList.remove('active');cardPreview.classList.remove('active');});
    cardPreview.addEventListener('mousemove',e=>{const r=cardPreview.getBoundingClientRect(),x=(e.clientX-r.left-r.width/2)/(r.width/2),y=(e.clientY-r.top-r.height/2)/(r.height/2);cardInner.style.transform=`rotateY(${x*12}deg) rotateX(${-y*12}deg)`;});
    cardPreview.addEventListener('mouseleave',()=>{cardInner.style.transform='rotateY(0) rotateX(0)';});
    const cvvField=document.getElementById('cvv');cvvField.addEventListener('focus',()=>cardInner.style.transform='rotateY(180deg)');cvvField.addEventListener('blur',()=>cardInner.style.transform='rotateY(0)');
    document.getElementById('card-number').addEventListener('input',e=>{let v=e.target.value.replace(/\D/g,'').match(/.{1,4}/g)?.join(' ')||'';e.target.value=v;preview.num.innerText=v||'XXXX XXXX XXXX XXXX';});
    document.getElementById('expiry-date').addEventListener('input',e=>{let v=e.target.value.replace(/\D/g,'');if(v.length>2)v=v.slice(0,2)+'/ '+v.slice(2,4);e.target.value=v;preview.exp.innerText=v||'MM/YY';});
    document.getElementById('name').addEventListener('input',e=>preview.nm.innerText=e.target.value||'Name');cvvField.addEventListener('input',e=>preview.cvv.innerText=e.target.value||'***');
    const payBtn=document.getElementById('pay-button');form.addEventListener('submit',e=>{e.preventDefault();payBtn.disabled=true;setTimeout(()=>{overlay.style.display='block';successPopup.style.display='block';setTimeout(()=>{overlay.style.display='none';successPopup.style.display='none';form.reset();['num','exp','nm','cvv'].forEach(k=>preview[k].innerText={'num':'XXXX XXXX XXXX XXXX','exp':'MM/YY','nm':'Name','cvv':'***'}[k]);cardInner.style.transform='rotateY(0) rotateX(0)';payBtn.disabled=false;},3000);},1000);});
  </script>
</body>
</html>
